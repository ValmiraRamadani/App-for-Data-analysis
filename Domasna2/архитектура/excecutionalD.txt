Извршен Дизајн за Апликацијата за Анализа на Берзански Податоци

1. Кориснички Интерфејс (React UI)

- Технологија: React.js
- Одговорности:
  - Прикажување на податоци како што се акции, информации за компании и историски податоци.
  - Овозможување на корисниците да пребаруваат компании, гледаат графикони и анализираат финансиски извештаи.
  - Обезбедување на интерфејс за корисничка автентикација и управување со профили.

- Детали за имплементација:
  - Управување со состојби: React Context ќе се користат за управување со глобалната состојба (логирање на корисникот, податоци за акции, и кориснички преференци).
  - UI Компоненти:
    - Компоненти за прикажување на податоци за акции .
    - Формулари за пребарување компании, прикажување на резултати и внесување на податоци за регистрација/логирање.
  - API Интеграција:
    - Axios или Fetch API ќе се користат за комуникација со backend услугите.
    - Frontend-от ќе комуницира со API Gateway за операции поврзани со акции и корисници.

2. API Gateway

- Технологија: Node.js со Express.js
- Одговорности:
  - Насочување на пристигнатите HTTP барања од frontend кон соодветен backend микросервис.
  - Обезбедување автентикација и авторизација користејќи JWT (JSON Web Tokens).
  - Управување со товарот на барањата и скалирање за да се осигура стабилноста на сервисот.

- Детали за имплементација:
  - Рутинг:
    - Express.js ќе дефинира рути за различни типови на барања (на пример, /api/stocks за акции, /api/users за кориснички операции).
  - Автентикација:
    - Имплементација на JWT токени за логирање на корисниците и управување со сесиите.
  - Ограничување на бројот на барања:
    - Implementing rate limiting со помош на middleware за да се спречи преоптоварување и да се осигура фер користење на услугите.

3. Backend Микросервиси

- Технологија: Node.js или Python Flask (в зависност од предностите на тимот)
- Одговорности:
  - Сервис за Берзански Податоци:
    - Собирање, процесирање и складирање историски податоци за акции од CSV датотеки.
    - Изложување на API за побарување на податоци за акции, вклучувајќи цени на акции, историски податоци итн.
  - Сервис за Корисници:
    - Управување со автентикација, профили и регистрација на корисници.

- Сервис за Берзански Податоци

  - Обработка на CSV Податоци:
    - Извор на податоци: CSV датотеки кои содржат податоци за акции (од Македонската берза).
    - Парсирање на CSV: Користење библиотеки како csv-parser (за Node.js) или Pandas (за Python) за парсирање и обработка на податоците.
      - Податоците кои ќе бидат обработени од CSV датотеката вклучуваат:
        - Date: Датум на трговија
        - Last trade price: Последна цена на трговија
        - Max: Максимална цена на акцијата
        - Min: Минимална цена на акцијата
        - Avg. Price: Средна цена на акцијата
        - %chg.: Процентуално менување на цената
        - Volume: Волумен на акции тргувани
        - Turnover in BEST in denars: Промет во денари на пазарот BEST
        - Total turnover in denars: Вкупен промет во денари
    - Складирање на податоци: По обработката, податоците ќе се зачуваат во PostgreSQL база на податоци за лесно пребарување и анализа.
    - API Рути:
      - GET /stocks/:symbol: Преземање на последна цена на акција за одредена компанија.
      - GET /stocks/history: Преземање на историски податоци за акција од определена компанија.
      - POST /stocks/upload: Рута за качување CSV датотеки со податоци за акции.

- Сервис за Корисници

  - Автентикација:
    - Користење JWT токени за логирање и управување со сесии.
    - Login Endpoint: POST /users/login - автентикација на корисници според e-mail и лозинка.
    - Register Endpoint: POST /users/register - дозволување на нови корисници да се регистрираат.
    - Profile Endpoint: GET /users/profile - преземање на профилни податоци на корисник.

  - Управување со корисници:
    - Корисниците можат да ги видат и уредуваат своите профилни податоци, како што се лозинка и лични информации.

4. Складиште на Податоци (PostgreSQL)

- Технологија: PostgreSQL
- Одговорности:
  - Складирање на информации за корисници (профили, автентикација).
  - Складирање на податоци за акции (историски цени, податоци за компании).

- Структура на Базата на Податоци:
  - Табела за корисници:
    CREATE TABLE users (
        id SERIAL PRIMARY KEY,
        email VARCHAR(255) UNIQUE NOT NULL,
        password_hash VARCHAR(255) NOT NULL,
        first_name VARCHAR(255),
        last_name VARCHAR(255),
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    );

  - Табела за акции:
    CREATE TABLE stocks (
        id SERIAL PRIMARY KEY,
        symbol VARCHAR(10) NOT NULL,
        company_name VARCHAR(255),
        date DATE NOT NULL,
        last_trade_price DECIMAL(10, 2),
        max_price DECIMAL(10, 2),
        min_price DECIMAL(10, 2),
        avg_price DECIMAL(10, 2),
        percentage_change DECIMAL(5, 2),
        volume INT,
        turnover_best DECIMAL(12, 2),
        total_turnover DECIMAL(12, 2)
    );

5. Интеграција на Надворешни Извори на Податоци

- Податоци за Берза (CSV Фајлови):
  - Корисниците или администраторите можат да качуваат CSV датотеки со податоци за акции. Овие датотеки ќе бидат обработени и внесени во базата на податоци преку Сервисот за Берзански Податоци.

- Надворешен API за Реално Време на Податоци:
  - Доколку се потребни податоци во реално време (освен историските податоци од CSV), ќе се интегрираме со надворешен API за податоци за акции како што се Alpha Vantage или Yahoo Finance API.
  - Сервисот за Берзански Податоци може да прави барања кон овој API за да преземе најнови цени на акции и да ги ажурира податоците во базата.

6. Деплојмент

- Docker:
  - Користење на Docker за контеинеризација на целата апликација, вклучувајќи frontend, backend сервиси и база на податоци.
  - Ова овозможува полесно деплојирање и скалирање бидејќи секој компонент е во својот контейнер.

- Облак инфраструктура:
  - Апликацијата може да се хостира на облак платформи како AWS, Google Cloud или Azure.
  - Користење на услуги како AWS RDS за PostgreSQL база, AWS S3 за чување CSV датотеки и Docker оркестрација преку AWS ECS.
